{{>adminlinks}}

{{>adminSidebar}}
<main class="main-wrap">
    {{>adminHeader}}
    <div class="row tm-content-row tm-mt-big">
        <div class="col-xl-12 col-lg-12 tm-md-12 tm-sm-12 tm-col">
            <div class="bg-white tm-block h-100">
                <div class="row">
                    <div class="col-md-8 col-sm-12">
                        <h2 class="tm-block-title d-inline-block">Products</h2>

                    </div>

                </div>


                <div class="tm-table-mt tm-table-actions-row">
                    {{!-- <div class="tm-table-actions-col-left">
                        <button class="btn btn-danger">Delete Selected Items</button>
                    </div> --}}
                    {{!-- <div class="tm-table-actions-col-right offset-9">
                        <span class="tm-pagination-label">Page</span>
                        <nav aria-label="Page navigation" class="d-inline-block">
                            <ul class="pagination tm-pagination">
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <span class="tm-dots d-block">...</span>
                                </li>
                                <li class="page-item"><a class="page-link" href="#">13</a></li>
                                <li class="page-item"><a class="page-link" href="#">14</a></li>
                            </ul>
                        </nav>
                    </div> --}}
                </div>
            </div>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover" id="order-table">
                    <thead>
                        <tr>
                            <th>no</th>
                            <th>Product Name</th>
                            <th scope="col">Product Price</th>
                            <th scope="col">totalAMount</th>
                            <th scope="col">Total Sold</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each td}}
                        <tr>
                            <td>{{inc @ index}}</td>
                            <td>{{this._id.name}}</td>
                            <td>{{this._id.price}}</td>
                            <td class="totalAmount">{{this.totalPrice}}</td>
                            <td>{{this.qtysum}}</td>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                    <tfoot>
                        <tr>
                           <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td id="sum"></td>
                        </tr>
                    </tfoot>
                </table>
            </div> <!-- table-responsive //end -->
        </div>
</main>
<script>
    $(document).ready(function () {
        $('#order-table').DataTable({
            dom: 'Bfrtip',
            buttons: [
                'excel', 'pdf', 'print'
            ]
        });
    });
</script>
<script>
      var GrandTotal = 0
      let total = document.querySelectorAll('.totalAmount')
      total.forEach((elemnt) => {
        let value = parseInt(elemnt.innerHTML)
        GrandTotal += value
      })
      document.getElementById('sum').innerHTML = GrandTotal
    </script>
{{>adminjs}}